@using MeddyExplorerApp.Services;
@inject MeddyExplorerState meddyExplorerState

<MudToolBar DisableGutters="true" Dense="true" Elevation="0">
    <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Filled.KeyboardArrowLeft" OnClick="@OnBackButtonClick" />
    <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Filled.KeyboardArrowRight" OnClick="@OnForwardButtonClick" />
    <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Filled.ArrowUpward" OnClick="@OnUpButtonClick" />
    <MudText>@meddyExplorerState?.CurrentDir?.Name</MudText>
    <MudSpacer />
</MudToolBar>

<MEACurrentDirTextField />
<MEACurrentDirFilesGrid />

@code
{

    protected override void OnInitialized()
    {
        meddyExplorerState.OnCurrentDirChangedDelegate += OnCurrentDirChange;
    }
    public void OnCurrentDirChange(DirectoryInfo inOldCurrentDir, DirectoryInfo inNewCurrentDir)
    {
        StateHasChanged();
    }

    private void OnUpButtonClick()
    {
        meddyExplorerState.CurrentDir = meddyExplorerState.CurrentDir.Parent;
    }
    private void OnBackButtonClick()
    {

    }
    private void OnForwardButtonClick()
    {

    }
}
